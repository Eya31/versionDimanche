<div class="form-container">
  <div class="header">
    <h1>‚ûï Ajouter main d'≈ìuvre</h1>
    <button class="btn btn-secondary" (click)="cancel()">Annuler</button>
  </div>

  <form (ngSubmit)="onSubmit()" class="main-doeuvre-form">
    <div class="form-section">
      <h3>üìù Informations personnelles</h3>
      <div class="form-row">
        <div class="form-group">
          <label>Nom <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formData.nom" name="nom" required />
        </div>
        <div class="form-group">
          <label>Pr√©nom</label>
          <input type="text" [(ngModel)]="formData.prenom" name="prenom" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>CIN <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formData.cin" name="cin" required />
        </div>
        <div class="form-group">
          <label>Matricule</label>
          <input type="text" [(ngModel)]="formData.matricule" name="matricule" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>T√©l√©phone <span class="required">*</span></label>
          <input type="tel" [(ngModel)]="formData.telephone" name="telephone" required />
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="formData.email" name="email" />
        </div>
      </div>
      <div class="form-group">
        <label>M√©tier</label>
        <input type="text" [(ngModel)]="formData.metier" name="metier" />
      </div>
    </div>

    <div class="form-section">
      <h3>üîß Comp√©tences</h3>
      <div class="competences-input">
        <input 
          type="text" 
          [(ngModel)]="competenceInput" 
          name="competenceInput"
          placeholder="Ajouter une comp√©tence..."
          (keyup.enter)="addCompetence()"
        />
        <button type="button" class="btn btn-sm btn-primary" (click)="addCompetence()">Ajouter</button>
      </div>
      <div class="competences-list" *ngIf="formData.competences.length > 0">
        <span class="competence-badge" *ngFor="let comp of formData.competences">
          {{ comp }}
          <button type="button" class="remove-btn" (click)="removeCompetence(comp)">√ó</button>
        </span>
      </div>
    </div>

    <div class="form-section">
      <h3>üìú Habilitations</h3>
      <div class="habilitation-form">
        <div class="form-row">
          <div class="form-group">
            <label>Nom habilitation</label>
            <input type="text" [(ngModel)]="habilitationInput.nom" name="habilitationNom" />
          </div>
          <div class="form-group">
            <label>Num√©ro certificat</label>
            <input type="text" [(ngModel)]="habilitationInput.numeroCertificat" name="numeroCertificat" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Date d'obtention</label>
            <input type="date" [(ngModel)]="habilitationInput.dateObtention" name="dateObtention" />
          </div>
          <div class="form-group">
            <label>Date d'expiration</label>
            <input type="date" [(ngModel)]="habilitationInput.dateExpiration" name="dateExpiration" />
          </div>
        </div>
        <button type="button" class="btn btn-sm btn-primary" (click)="addHabilitation()">Ajouter habilitation</button>
      </div>
      <div class="habilitations-list" *ngIf="formData.habilitations.length > 0">
        <div class="habilitation-item" *ngFor="let hab of formData.habilitations; let i = index">
          <div class="habilitation-info">
            <strong>{{ hab.nom }}</strong>
            <span *ngIf="hab.numeroCertificat"> - Cert: {{ hab.numeroCertificat }}</span>
            <span *ngIf="hab.dateExpiration"> - Expire: {{ hab.dateExpiration | date:'short' }}</span>
          </div>
          <button type="button" class="btn btn-sm btn-danger" (click)="removeHabilitation(i)">Supprimer</button>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="!isFormValid() || saving">
        {{ saving ? 'Cr√©ation...' : 'Cr√©er' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancel()">Annuler</button>
    </div>
  </form>
</div>

<div class="main-doeuvre-container">
  <div class="header">
    <h1>ğŸŸ¡ Liste de la main d'Å“uvre</h1>
    <a routerLink="/admin/main-doeuvre/add" class="btn btn-primary">
      â• Ajouter main d'Å“uvre
    </a>
  </div>

  <div class="filters">
    <div class="filter-group">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (input)="applyFilters()"
        placeholder="Rechercher par nom, CIN, tÃ©lÃ©phone..."
        class="search-input"
      />
    </div>
    <div class="filter-group">
      <label>DisponibilitÃ© :</label>
      <select [(ngModel)]="filtreDisponibilite" (change)="applyFilters()">
        <option value="all">Toutes</option>
        <option value="DISPONIBLE">Disponible</option>
        <option value="OCCUPE">OccupÃ©</option>
        <option value="EN_CONGE">En congÃ©</option>
        <option value="ABSENT">Absent</option>
      </select>
    </div>
    <div class="filter-group">
      <input 
        type="text" 
        [(ngModel)]="filtreCompetence" 
        (input)="applyFilters()"
        placeholder="Filtrer par compÃ©tence..."
        class="search-input"
      />
    </div>
    <button class="btn btn-secondary" (click)="resetFilters()">
      RÃ©initialiser
    </button>
  </div>

  <div *ngIf="loading" class="loading">
    <p>Chargement de la main d'Å“uvre...</p>
  </div>

  <div *ngIf="!loading && mainDoeuvreFiltres.length === 0" class="empty-state">
    <p>Aucune main d'Å“uvre trouvÃ©e</p>
  </div>

  <div *ngIf="!loading && mainDoeuvreFiltres.length > 0" class="main-doeuvre-list">
    <div class="main-doeuvre-card" *ngFor="let agent of mainDoeuvreFiltres">
      <div class="agent-info">
        <div class="agent-header">
          <h3>{{ agent.nom }} {{ agent.prenom || '' }}</h3>
          <span class="agent-id">ID: #{{ agent.id }}</span>
        </div>
        <div class="agent-details">
          <p><strong>CIN:</strong> {{ agent.cin }}</p>
          <p><strong>TÃ©lÃ©phone:</strong> {{ agent.telephone }}</p>
          <p *ngIf="agent.email"><strong>Email:</strong> {{ agent.email }}</p>
          <p><strong>MÃ©tier:</strong> {{ agent.metier || 'Non spÃ©cifiÃ©' }}</p>
          <p><strong>CompÃ©tences:</strong> {{ getCompetencesString(agent.competences) }}</p>
          <p>
            <strong>DisponibilitÃ©:</strong>
            <span class="badge" [ngClass]="getDisponibiliteClass(agent.disponibilite)">
              {{ getDisponibiliteLabel(agent.disponibilite) }}
            </span>
          </p>
        </div>
      </div>
      <div class="agent-actions">
        <a [routerLink]="['/admin/main-doeuvre', agent.id]" class="btn btn-sm btn-primary">
          ğŸ‘ï¸ Voir dÃ©tails
        </a>
        <button class="btn btn-sm btn-danger" (click)="deleteMainDoeuvre(agent)">
          ğŸ—‘ï¸ Archiver
        </button>
      </div>
    </div>
  </div>
</div>

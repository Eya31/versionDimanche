<div class="carte-container">
  <div class="header">
    <h1>ğŸ“ Carte des interventions</h1>
    <button class="btn btn-primary" (click)="loadInterventions()" [disabled]="loading">
      ğŸ”„ Actualiser
    </button>
  </div>

  <div class="filters">
    <div class="filter-group">
      <label>Ã‰tat :</label>
      <select [(ngModel)]="filtreEtat" (change)="applyFilters()">
        <option value="all">Tous les Ã©tats</option>
        <option value="EN_ATTENTE">En attente</option>
        <option value="EN_COURS">En cours</option>
        <option value="TERMINEE">TerminÃ©e</option>
        <option value="SUSPENDUE">Suspendue</option>
      </select>
    </div>

    <div class="filter-group">
      <label>PrioritÃ© :</label>
      <select [(ngModel)]="filtrePriorite" (change)="applyFilters()">
        <option value="all">Toutes les prioritÃ©s</option>
        <option value="URGENTE">Urgente</option>
        <option value="CRITIQUE">Critique</option>
        <option value="NORMALE">Normale</option>
        <option value="PLANIFIEE">PlanifiÃ©e</option>
      </select>
    </div>

    <button class="btn btn-secondary" (click)="resetFilters()">
      RÃ©initialiser
    </button>
  </div>

  <div *ngIf="loading" class="loading">
    <p>Chargement des interventions...</p>
  </div>

  <div class="map-wrapper">
    <div id="interventionMap" class="map"></div>
    <div class="map-legend">
      <h3>LÃ©gende</h3>
      <div class="legend-item">
        <span class="legend-color" style="background: #10b981;"></span>
        <span>En cours</span>
      </div>
      <div class="legend-item">
        <span class="legend-color" style="background: #f59e0b;"></span>
        <span>En attente</span>
      </div>
      <div class="legend-item">
        <span class="legend-color" style="background: #3b82f6;"></span>
        <span>TerminÃ©e</span>
      </div>
      <div class="legend-item">
        <span class="legend-color" style="background: #ef4444;"></span>
        <span>Suspendue</span>
      </div>
    </div>
  </div>
</div>
